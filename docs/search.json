[
  {
    "objectID": "homework 6.html",
    "href": "homework 6.html",
    "title": "ST558 Homework 6",
    "section": "",
    "text": "The lapply() function is used to apply a function to each element of a list. The equivalent purrr function is map().\n\n\n\nlapply(X = my_list, \n       FUN = function(x){\n         corr(x, method = \"kendall\")\n       }\n)\n\n\nOne advantage is that there is more consistency with the purrr functions compared to the BaseR apply functions. Another advantage is the helpers which can allow you to write more compact code.\nA side-effect function is one that does not change the data and instead produces something. Some examples are print() and plot().\nThis is because when you call a function, it creates a temporary function environment. The code is executed in this environment and after the function is done running the environment is gone."
  },
  {
    "objectID": "homework 6.html#task-1",
    "href": "homework 6.html#task-1",
    "title": "ST558 Homework 6",
    "section": "",
    "text": "The lapply() function is used to apply a function to each element of a list. The equivalent purrr function is map().\n\n\n\nlapply(X = my_list, \n       FUN = function(x){\n         corr(x, method = \"kendall\")\n       }\n)\n\n\nOne advantage is that there is more consistency with the purrr functions compared to the BaseR apply functions. Another advantage is the helpers which can allow you to write more compact code.\nA side-effect function is one that does not change the data and instead produces something. Some examples are print() and plot().\nThis is because when you call a function, it creates a temporary function environment. The code is executed in this environment and after the function is done running the environment is gone."
  },
  {
    "objectID": "homework 6.html#task-2",
    "href": "homework 6.html#task-2",
    "title": "ST558 Homework 6",
    "section": "Task 2",
    "text": "Task 2\n\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\n\nRMSE Function\n\n\ngetRMSE &lt;- function(resp, pred, ...) {\n  sq_diff &lt;- (resp - pred)^2\n  sqrt(mean(sq_diff, ...))\n}\n\n\n\n\n\nset.seed(10)\nn &lt;- 100\nx &lt;- runif(n)\nresp &lt;- 3 + 10 * x + rnorm(n)\npred &lt;- predict(lm(resp ~ x), data.frame(x))\ngetRMSE(resp, pred)  # testing function\n\n[1] 0.9581677\n\n\n\nresp[2] &lt;- NA_real_\nresp[7] &lt;- NA_real_\ngetRMSE(resp, pred, na.rm = TRUE)  # specifying for missing values\n\n[1] 0.9633221\n\ngetRMSE(resp, pred)  # not specifying for missing values\n\n[1] NA\n\n\n\nMAE Function\n\n\ngetMAE &lt;- function(resp, pred, ...) {\n  abs_diff &lt;- abs(resp - pred)\n  mean(abs_diff, ...)\n}\n\n\n\n\n\nset.seed(10)\nn &lt;- 100\nx &lt;- runif(n)\nresp &lt;- 3 + 10 * x + rnorm(n)\npred &lt;- predict(lm(resp ~ x), data.frame(x))\ngetMAE(resp, pred)  # testing function\n\n[1] 0.8155776\n\n\n\nresp[2] &lt;- NA_real_\nresp[7] &lt;- NA_real_\ngetMAE(resp, pred, na.rm = TRUE)  # specifying for missing values\n\n[1] 0.8200423\n\ngetMAE(resp, pred)  # not specifying for missing values\n\n[1] NA\n\n\n\nWrapper Function\n\n\ngetMetrics &lt;- function(resp, pred, metrics = c(\"RMSE\", \"MAE\"), ...) {\n  \n  if (!is.atomic(resp) | !is.atomic(pred)) {\n    stop(\"The function input must have two atomnic vectors\")\n  }\n  \n  if (all(metrics == \"RMSE\")) {\n    metric_list &lt;- list(RMSE = getRMSE(resp, pred, ...))\n  } else if (all(metrics == \"MAE\")) {\n    metric_list &lt;- list(MAE = getMAE(resp, pred, ...))\n  } else {\n    metric_list &lt;- list(RMSE = getRMSE(resp, pred, ...), \n                        MAE = getMAE(resp, pred, ...))\n  }\n  \n  return(metric_list)\n}\n\n\n\n\n\nset.seed(10)\nn &lt;- 100\nx &lt;- runif(n)\nresp &lt;- 3 + 10 * x + rnorm(n)\npred &lt;- predict(lm(resp ~ x), data.frame(x))\ngetMetrics(resp, pred)  # testing function with both metrics\n\n$RMSE\n[1] 0.9581677\n\n$MAE\n[1] 0.8155776\n\ngetMetrics(resp, pred, metrics = \"RMSE\")  # testing function for just RMSE\n\n$RMSE\n[1] 0.9581677\n\ngetMetrics(resp, pred, metrics = \"MAE\")  # testing function for just MAE\n\n$MAE\n[1] 0.8155776\n\n\n\nresp[2] &lt;- NA_real_\nresp[7] &lt;- NA_real_\ngetMetrics(resp, pred, na.rm = TRUE)  # specifying for missing values\n\n$RMSE\n[1] 0.9633221\n\n$MAE\n[1] 0.8200423\n\ngetMetrics(resp, pred)  # not specifying for missing values\n\n$RMSE\n[1] NA\n\n$MAE\n[1] NA\n\ngetMetrics(resp, pred, metrics = \"RMSE\", na.rm = TRUE)  # specifying for missing values\n\n$RMSE\n[1] 0.9633221\n\ngetMetrics(resp, pred, metrics = \"MAE\", na.rm = TRUE)  # specifying for missing values\n\n$MAE\n[1] 0.8200423\n\ngetMetrics(resp, pred, metrics = \"RMSE\")  # not specifying for missing values\n\n$RMSE\n[1] NA\n\ngetMetrics(resp, pred, metrics = \"MAE\")  # not specifying for missing values\n\n$MAE\n[1] NA\n\n\n\ntest_df &lt;- data.frame()  \ngetMetrics(resp = test_df, pred)  # testing with non vector input\n\nError in getMetrics(resp = test_df, pred): The function input must have two atomnic vectors"
  },
  {
    "objectID": "homework 6.html#task-3",
    "href": "homework 6.html#task-3",
    "title": "ST558 Homework 6",
    "section": "Task 3",
    "text": "Task 3\n\n& 2.\n\n\nlibrary(jsonlite)\n\n\nAttaching package: 'jsonlite'\n\n\nThe following object is masked from 'package:purrr':\n\n    flatten\n\nlibrary(httr)\ntemp_url &lt;- \n  GET(\"https://newsapi.org/v2/top-headlines?country=us&category=business&apiKey=6cfff225c2854bdea42bb46beb09a5fd\")\n\nparsed_temp &lt;- fromJSON(rawToChar(temp_url$content))\n\nbiz_news &lt;- parsed_temp |&gt;\n  pluck(\"articles\") |&gt;\n  as_tibble()\n\nbiz_news\n\n# A tibble: 20 × 8\n   source$id $name author title description url   urlToImage publishedAt content\n   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;  \n 1 cbs-news  CBS … Aimee… \"Tru… Trading in… http… https://a… 2024-10-15… \"Econo…\n 2 the-wall… The … The W… \"Boe… &lt;NA&gt;        http… &lt;NA&gt;       2024-10-15…  &lt;NA&gt;  \n 3 the-verge The … Allis… \"AMD… Chip maker… http… https://c… 2024-10-15… \"AMD, …\n 4 associat… Asso… TOM M… \"Wal… Walgreens … http… https://d… 2024-10-15… \"Walgr…\n 5 &lt;NA&gt;      Barr… Barro… \"Uni… &lt;NA&gt;        http… &lt;NA&gt;       2024-10-15…  &lt;NA&gt;  \n 6 &lt;NA&gt;      Barr… Barro… \"Nvi… &lt;NA&gt;        http… &lt;NA&gt;       2024-10-15…  &lt;NA&gt;  \n 7 &lt;NA&gt;      Fox … Aisli… \"Big… Big Lots a… http… https://a… 2024-10-15… \"Big L…\n 8 &lt;NA&gt;      Yaho… Karen… \"Sto… As a fresh… http… https://s… 2024-10-15… \"On Tu…\n 9 &lt;NA&gt;      Fox … Eric … \"Ame… The New Yo… http… https://a… 2024-10-15… \"Ameri…\n10 cbs-news  CBS … Alexa… \"As … Hospitals … http… https://a… 2024-10-15… \"IV fl…\n11 &lt;NA&gt;      Fox … Danie… \"Hol… The larges… http… https://a… 2024-10-15… \"The N…\n12 abc-news  ABC … The A… \"US … The United… http… https://i… 2024-10-15… \"WASHI…\n13 the-wall… The … The W… \"Sto… &lt;NA&gt;        http… &lt;NA&gt;       2024-10-15…  &lt;NA&gt;  \n14 &lt;NA&gt;      Vari… Todd … \"Net… Analysts e… http… https://v… 2024-10-15… \"Netfl…\n15 techcrun… Tech… Maxwe… \"Whi… The Biden … http… https://t… 2024-10-15… \"The B…\n16 &lt;NA&gt;      Real… https… \"Maj… The U.S. F… http… https://w… 2024-10-15… \"If yo…\n17 &lt;NA&gt;      New … Taylo… \"Boe… Boeing wil… http… https://n… 2024-10-15… \"Boein…\n18 &lt;NA&gt;      Inve… Andre… \"Uni… Shares of … http… https://w… 2024-10-15… \"&lt;ul&gt;&lt;…\n19 &lt;NA&gt;      Decr… Murtu… \"Bit… Will Bitco… http… https://c… 2024-10-15… \"With …\n20 ars-tech… Ars … Kyle … \"Rep… But the pr… http… https://c… 2024-10-15…  &lt;NA&gt;  \n\n\n\n\n\n\nnewsAPIFun &lt;- function(title, time, key) {\n  url &lt;- paste0(\"https://newsapi.org/v2/everything?q=\",\n                title,\n                \"&from=\",\n                time,\n                \"&apiKey=\",\n                key)\n  \n  api_call &lt;- GET(url)\n  parsed &lt;- fromJSON(rawToChar(api_call$content))\n  \n  news_df &lt;- parsed |&gt;\n    pluck(\"articles\")\n  \n  news_df &lt;- as_tibble(news_df)\n  \n  return(news_df)\n}\n\n\n## testing API function\ntesla_news &lt;- newsAPIFun(title = \"tesla\", time = \"2024-09-16\", key = \"6cfff225c2854bdea42bb46beb09a5fd\")\nnvidia_news &lt;- newsAPIFun(title = \"nvidia\", time = \"2024-09-16\", key = \"6cfff225c2854bdea42bb46beb09a5fd\")\n\ntesla_news\n\n# A tibble: 100 × 8\n   source$id $name author title description url   urlToImage publishedAt content\n   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;  \n 1 &lt;NA&gt;      [Rem… &lt;NA&gt;   [Rem… \"[Removed]\" http… &lt;NA&gt;       2024-10-02… \"[Remo…\n 2 wired     Wired Kevin… I Ow… \"The anxie… http… https://m… 2024-10-04… \"It sh…\n 3 wired     Wired Aaria… Tesl… \"On Thursd… http… https://m… 2024-10-09… \"On Th…\n 4 the-verge The … Andre… Tesl… \"Tesla CEO… http… https://c… 2024-10-11… \"Tesla…\n 5 the-verge The … Andre… The … \"Tesla CEO… http… https://c… 2024-10-09… \"Image…\n 6 &lt;NA&gt;      [Rem… &lt;NA&gt;   [Rem… \"[Removed]\" http… &lt;NA&gt;       2024-10-08… \"[Remo…\n 7 the-verge The … Wes D… The … \"Tesla’s O… http… https://c… 2024-10-13… \"An Op…\n 8 &lt;NA&gt;      BBC … &lt;NA&gt;   Musk… \"BBC Tech … http… https://i… 2024-10-12… \"Elon …\n 9 the-verge The … Andre… EV c… \"Revel tea… http… https://c… 2024-09-18… \"EV ch…\n10 &lt;NA&gt;      Yaho… Danny… Tesl… \"Tesla iss… http… &lt;NA&gt;       2024-10-03… \"If yo…\n# ℹ 90 more rows\n\n\n\n\n\n\n## one-way contingency table\ntable(tesla_news$source$name, useNA = \"always\")\n\n\n                [Removed]              Ars Technica                  BBC News \n                        3                         5                         1 \n         Business Insider            Digital Trends               Gizmodo.com \n                       34                         1                        11 \n             heise online              Hipertextual Investor's Business Daily \n                        2                        11                         1 \n                      NPR                       PBS                 The Verge \n                        1                         1                         6 \n                     Time                 USA Today               VentureBeat \n                        2                         1                         1 \n                    Wired          WPIX 11 New York                Xataka.com \n                        3                         1                         6 \n      Yahoo Entertainment                      &lt;NA&gt; \n                        9                         0 \n\n\n\n\n\n\nlibrary(lubridate)\ntesla_news_mod &lt;- tesla_news |&gt;\n  mutate(publishedAt = ymd_hms(publishedAt)) |&gt;\n  arrange(publishedAt) |&gt;\n  mutate(pub_diff = publishedAt - lag(publishedAt))\n\nnvidia_news_mod &lt;- nvidia_news |&gt;\n  mutate(publishedAt = ymd_hms(publishedAt)) |&gt;\n  arrange(publishedAt) |&gt;\n  mutate(pub_diff = publishedAt - lag(publishedAt))\n\ntesla_news_mod\n\n# A tibble: 100 × 9\n   source$id $name author title description url   urlToImage publishedAt        \n   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;      &lt;dttm&gt;             \n 1 &lt;NA&gt;      WPIX… Laure… 2 ki… WHITE PLAI… http… https://m… 2024-09-16 20:14:22\n 2 business… Busi… Thero… Orac… Larry Elli… http… https://i… 2024-09-17 10:22:32\n 3 &lt;NA&gt;      Yaho… &lt;NA&gt;   Hgen… &lt;NA&gt;        http… &lt;NA&gt;       2024-09-17 13:00:00\n 4 &lt;NA&gt;      Xata… Rubén… X ha… Por mucho … http… https://i… 2024-09-17 13:30:16\n 5 ars-tech… Ars … Jonat… Driv… As drivers… http… https://c… 2024-09-17 15:00:59\n 6 the-verge The … Andre… Back… For $1,999… http… https://c… 2024-09-18 04:00:00\n 7 business… Busi… Nora … GM's… General Mo… http… https://i… 2024-09-18 12:01:01\n 8 the-verge The … Andre… EV c… Revel team… http… https://c… 2024-09-18 13:00:00\n 9 &lt;NA&gt;      Yaho… Lawre… 1 So… This AI co… http… https://s… 2024-09-19 11:15:00\n10 business… Busi… Tom C… A Ru… Ramzan Kad… http… https://i… 2024-09-20 10:43:52\n# ℹ 90 more rows\n# ℹ 2 more variables: content &lt;chr&gt;, pub_diff &lt;drtn&gt;\n\n\n\n\n\n\ntesla_subset &lt;- tesla_news_mod |&gt;\n  select(publishedAt, pub_diff)\n\ntesla_summary &lt;- tesla_subset |&gt;\n  map(\\(x) list(mean = mean(x, na.rm = TRUE),\n                sd = sd(x, na.rm = TRUE),\n                median = median(x, na.rm = TRUE)))\n\ntesla_summary\n\n$publishedAt\n$publishedAt$mean\n[1] \"2024-10-05 11:12:58 UTC\"\n\n$publishedAt$sd\n[1] 715699.7\n\n$publishedAt$median\n[1] \"2024-10-09 03:34:38 UTC\"\n\n\n$pub_diff\n$pub_diff$mean\nTime difference of 25329.83 secs\n\n$pub_diff$sd\n[1] 34252.19\n\n$pub_diff$median\nTime difference of 8937 secs"
  }
]